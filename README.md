# Главный Репозиторий Foton
Если вы видете это, вы (надеюсь...) разрабатываете Foton, разные тестируемые / сырые изменения делайте в ветке dev/ рабочие релизы идущие на релизный сервер мёрджите в master/
спрашивайте Denery за Gradle и Scala штуки.

Люди имеющие доступ к репозиторию:
------
- FO (Foton Owner) - руководитель всех комманд Foton.
- Danik Vitek - Тим-Лид, всегда имеет ТЗ и распределяет работу по команде. Разрабатывает подпроекты Discs, DiscRegistry, Waystones. Языки: Java, Scala.
- Denery (A.K.A ExtraExtremeERA) - Архитектор, Performance Engineer, в основном делает основные библиотеки так, чтобы в будущем другие программисты не страдали от их использования / Производительности. Может принимать тех. Решения в проекте. (Какую, где и как использовать различные технологии в проектах). Разрабатывает подпроекты: Entities, EntityRegistry. Языки: Java, Scala, Groovy (Gradle).
- SapeNeCo - рядовой разработчик, делает Discord ботов коммуницирующих с сервером в своих репозиториях, в этом репозитории на данный момент ничего не разрабатывает. Языки: Java.


Структура проекта:
-------
Подпроекты лежащие прямо в руте (по типу Entities, Discs, WayStones) являются самими плагинами со своими plugin.yml,
в свою очередь они могут зависеть от подпроектов в Libraries/ которые являются нашими локальными библиотеками
которые мы написали в процессе разработки основных плагинов. Наши библиотеки не являются отдельными плагинами, 
в процессе сборки они собираются вместе с теми плагинами, которые их используют.
Весь код из отдельных подпроектов по типу Entities при запуске команды jar в руте автоматически билдится в .server/plugins/.
.server/ является нашим локальным сервером на airplane для тестов. (Можете подрубить туда hotswap если знаете как)
Также в Libraries есть библиотека Misc,в которую можно пихать разные (извращённые) штуки которые используются по проекту повсеместно.

Про Scala:
-------
Scala - JVM-based язык компилируемый  в Java байткод и полностью поддерживаемый джавой, основная парадигма написания программ на Scala это
функциональное программирование, которое при грамотном использовании будет намного удобнее и быстрее в написании чем ООП.

Мы не принуждаем к изучению Scala, но желательно чтобы вы хотя бы понимали базовые вещи чтобы коммуницировать со Scala на проекте

Инициатива добавить scala как второй язык на проект была введена с целью снижения времени на разработку библиотек и их сложных компонентов,
код на scala написан в Функциональном стиле Tagless Final, есть одна замечательная [конференция](https://www.youtube.com/watch?v=sWEtnq0ReZA&t=2024s) и [видео туториал](https://www.youtube.com/watch?v=ZNK57IXgr3M) посвящённые кодингу на этом стиле,
с которых мы и берём примеры. Помимо стандартной библиотеки Scala на проекте используется библиотека Tofu включающая в себя Cats, Cats Effect и Cats Tagless и другие компоненты. Ради поддержки скалы на сервере был введён отдельный плагин "ScalaSupport" в котором при билде будет забилжена внутрь стандартная библиотека Scala с Tofu и его зависимостями. (Лучше найти другой способ поддержки Scala) Также ещё так сложилось, что на момент принятия Scala на проект вышел Gradle 7.3 поддерживает новейшие версии scala 3+, так что для нас всё сложилось очень удобно.

Разработка:
------
Можно тестить плагин запустив ```gradle test-plugin``` эта команда автоматом билдит все плагины со всеси библиотеками в .server/plugins/ и запускает airplane.

Как и какие можно добавлять зависимости на подпроекты.
------
1. В [билдскрипте](build.gradle) итерируя массив названий подроектов они инициализируются по примерно похожей схеме друг с другом.
В блоке dependencies {} вы увидете switch, если в нём есть case с вашим подроектом, то добавляете зависимость туда.
Если нет, то добавляете этот case с именем подроекта, и уже добавляете во внутрь зависимость, не забывайте в конце case сделать пустой return.
2. Есть несколько видов зависимостей, я (Denery) настроил, что зависимость со словом ```implementation``` билдится во внутрь
подпроекта, а зависимость со словом ```compileOnly``` видится в подпроекте, но не билдится в него. (Это нужно для библиотек-плагинов по типу ProtocolLib)
3. Если нужно добавить зависимость на локальную библиотеку в Libraries/ то пишите ```implementation project(":Libraries:название_библиотеки")```.
4. Чтобы добавить зависимость на NMS пишите ```compileOnly files("$rootDir/.sources/patched_1.17.1.jar")```

Ради добавления новых подроектов/миграции с локальных репозиториев пишите Denery.
